# This workflow will run tests using node and then publish a package to GitHub Packages when a release is created
# For more information see: https://docs.github.com/en/actions/publishing-packages/publishing-nodejs-packages

name: @itcode.dev/eslint-config NPM Publish

on:
  workflow_dispatch:
    inputs:
      version:
        type: choice
        description: 업데이트할 버전 선택
        required: true
        options:
        - major
        - minor
        - patch

jobs:
  versioning:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
      - uses: actions/checkout@v3
      
      - name: Version Update
      - id: upgrade
        run: |
          echo "@itcode.dev/eslint-config ${{ github.event.inputs.version }} 업그레이드"
          
          echo "::set-output name=oldver::$(node -p "require('./package.json').version")"
          
          git version ${{ github.event.inputs.version }}
          git push
          
          echo "::set-output name=newver::$(node -p "require('./package.json').version")"
          
          echo "📌 v${{ steps.upgrade.outputs.oldver }}"
          echo "⬆️ v${{ steps.upgrade.outputs.newver }}"
